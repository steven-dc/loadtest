<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HTTP/1.1 vs HTTP/2 – Image Test</title>
  <link rel="stylesheet" href="styles/style.css">
</head>
<body>
  <h1>HTTP Test – Load Images</h1>
  <p>This page loads 200KB files .</p>

  <pre id="output">Loading…</pre>

  <h2>200KB Images</h2>
  <div id="container500" style="display: flex; flex-wrap: wrap; gap: 10px; padding: 10px;"></div>


  <script>
    const output = document.getElementById('output');
    const container500 = document.getElementById('container500');
    const container1m = document.getElementById('container1m');
    const start = performance.now();

    const uniqueImages = 100;
    const repeatCount = 10;
    const total500 = uniqueImages * repeatCount;
    const total1m = uniqueImages * repeatCount;
    const timestamp = Date.now();

    let loaded500 = 0;
    let loaded1m = 0;

    // Load 200KB images
    for (let r = 0; r < repeatCount; r++) {
      for (let i = 1; i <= uniqueImages; i++) {
        const img = document.createElement('img');
        img.src = `images/image${i}.jpg?ts=${timestamp}&rep=${r}`;
        img.alt = `200KB Image ${i} – Repeat ${r + 1}`;
        img.style.width = '200px';
        img.style.height = 'auto';
        img.style.border = '1px solid #ccc';

        img.onload = () => {
          loaded500++;
          checkDone();
        };

        img.onerror = () => {
          console.error(`❌ Error loading 200KB image ${i} repeat ${r + 1}`);
        };

        container500.appendChild(img);
      }
    }


    function checkDone() {
      if (loaded500 === total500 && loaded1m === total1m) {
        const duration = performance.now() - start;
        output.textContent = `✅ Loaded ${total500} × 200KB  in ${duration.toFixed(2)} ms`;
        console.log(output.textContent);
      }
    }
  </script>
</body>
</html>
